<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Caffe2 - Python API: data_parallel_model Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="/static/favicon.png" type="image/x-icon">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
<link href="main.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo" width="56"><a href="/"><img alt="Logo" src="Caffe2-with-name-55-tall.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Caffe2 - Python API
   </div>
   <div id="projectbrief">A deep learning, cross platform ML framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.html','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">data_parallel_model Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Module caffe2.python.data_parallel_model.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdata__parallel__model_1_1CollectivesConcurrencyControl.html">CollectivesConcurrencyControl</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2121e214548c31e510e8230c1fdf9ada"><td class="memItemLeft" align="right" valign="top"><a id="a2121e214548c31e510e8230c1fdf9ada"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>Parallelize_GPU</b> (args, kwargs)</td></tr>
<tr class="separator:a2121e214548c31e510e8230c1fdf9ada"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a517a9e06da30c9a0e7809d411439db1d"><td class="memItemLeft" align="right" valign="top"><a id="a517a9e06da30c9a0e7809d411439db1d"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>Parallelize_CPU</b> (args, kwargs)</td></tr>
<tr class="separator:a517a9e06da30c9a0e7809d411439db1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8528db8b99860b41e6870bc2c73adb65"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedata__parallel__model.html#a8528db8b99860b41e6870bc2c73adb65">Parallelize</a> (model_helper_obj, input_builder_fun, forward_pass_builder_fun, param_update_builder_fun=None, optimizer_builder_fun=None, post_sync_builder_fun=None, devices=None, rendezvous=None, net_type='dag', broadcast_computed_params=True, optimize_gradient_memory=False, dynamic_memory_management=False, blobs_to_keep=None, use_nccl=False, max_concurrent_distributed_ops=16, cpu_device=False, num_threads_per_device=4, shared_model=False)</td></tr>
<tr class="separator:a8528db8b99860b41e6870bc2c73adb65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb91a7b83e88e50e8f89e6906679bce1"><td class="memItemLeft" align="right" valign="top"><a id="abb91a7b83e88e50e8f89e6906679bce1"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>Parallelize_GPU_BMUF</b> (args, kwargs)</td></tr>
<tr class="separator:abb91a7b83e88e50e8f89e6906679bce1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a3315567bfc11506eff4ee6c01d8b1f"><td class="memItemLeft" align="right" valign="top"><a id="a0a3315567bfc11506eff4ee6c01d8b1f"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>Parallelize_CPU_BMUF</b> (args, kwargs)</td></tr>
<tr class="separator:a0a3315567bfc11506eff4ee6c01d8b1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75712d2f72a7a833151191750a4f6587"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedata__parallel__model.html#a75712d2f72a7a833151191750a4f6587">Parallelize_BMUF</a> (model_helper_obj, input_builder_fun, forward_pass_builder_fun, param_update_builder_fun, block_learning_rate=1.0, block_momentum=None, devices=None, rendezvous=None, net_type='dag', master_device=None, use_nccl=False, nesterov=False, optimize_gradient_memory=False, reset_momentum_sgd=False, warmup_iterations=None, max_concurrent_distributed_ops=4, add_blobs_to_sync=None, num_threads_per_device=4, cpu_device=False)</td></tr>
<tr class="separator:a75712d2f72a7a833151191750a4f6587"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dc25226acf3166806e281b34eaf3079"><td class="memItemLeft" align="right" valign="top"><a id="a7dc25226acf3166806e281b34eaf3079"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>RunInitNet</b> (model)</td></tr>
<tr class="separator:a7dc25226acf3166806e281b34eaf3079"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9a2a40cf84d6fd439324b8d80518dd2"><td class="memItemLeft" align="right" valign="top"><a id="af9a2a40cf84d6fd439324b8d80518dd2"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>RunWarmup</b> (model)</td></tr>
<tr class="separator:af9a2a40cf84d6fd439324b8d80518dd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50d37f193e39d4528d29ec31dd20dea3"><td class="memItemLeft" align="right" valign="top"><a id="a50d37f193e39d4528d29ec31dd20dea3"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>RunNet</b> (model, num_iterations)</td></tr>
<tr class="separator:a50d37f193e39d4528d29ec31dd20dea3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad96ae8ff457878fd5d04aeec09cbca2f"><td class="memItemLeft" align="right" valign="top"><a id="ad96ae8ff457878fd5d04aeec09cbca2f"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>Synchronize</b> (model, timeout_sec=_DEFAULT_TIMEOUT_SEC)</td></tr>
<tr class="separator:ad96ae8ff457878fd5d04aeec09cbca2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0301331ccdf3c0d6f6fd2f38991b3c4c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedata__parallel__model.html#a0301331ccdf3c0d6f6fd2f38991b3c4c">ConvertNetForDevice</a> (net, device=None)</td></tr>
<tr class="separator:a0301331ccdf3c0d6f6fd2f38991b3c4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c4bd80dfa3243526cb86c75e817b0b0"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedata__parallel__model.html#a4c4bd80dfa3243526cb86c75e817b0b0">ExtractPredictorNet</a> (model, inputs, outputs, device)</td></tr>
<tr class="separator:a4c4bd80dfa3243526cb86c75e817b0b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abce7bdef068c7961e610e30fbb2fc11e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedata__parallel__model.html#abce7bdef068c7961e610e30fbb2fc11e">GetCheckpointParams</a> (model)</td></tr>
<tr class="separator:abce7bdef068c7961e610e30fbb2fc11e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeaf6f1994dee2a119718c0fff65962ba"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedata__parallel__model.html#aeaf6f1994dee2a119718c0fff65962ba">FinalizeAfterCheckpoint</a> (model, blobs=None)</td></tr>
<tr class="separator:aeaf6f1994dee2a119718c0fff65962ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a15f5a3c60ed2c6805cf1a567d2cf1f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedata__parallel__model.html#a2a15f5a3c60ed2c6805cf1a567d2cf1f">GetLearningRateBlobNames</a> (model)</td></tr>
<tr class="separator:a2a15f5a3c60ed2c6805cf1a567d2cf1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff1dd8e58b54d329a98e99e3837e8a99"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedata__parallel__model.html#aff1dd8e58b54d329a98e99e3837e8a99">AddBlobSync</a> (model, blobs, net=None)</td></tr>
<tr class="separator:aff1dd8e58b54d329a98e99e3837e8a99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac063cc91a546683b52bbca76cd488e72"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedata__parallel__model.html#ac063cc91a546683b52bbca76cd488e72">AddDistributedBlobSync</a> (model, blobs)</td></tr>
<tr class="separator:ac063cc91a546683b52bbca76cd488e72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64b08349dc1c6f9dc8b708ff148176d9"><td class="memItemLeft" align="right" valign="top"><a id="a64b08349dc1c6f9dc8b708ff148176d9"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>stripBlobName</b> (param)</td></tr>
<tr class="separator:a64b08349dc1c6f9dc8b708ff148176d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe15de0fc503825c9f2b55fc06884b2c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedata__parallel__model.html#afe15de0fc503825c9f2b55fc06884b2c">OptimizeGradientMemory</a> (model, input_shapes, excluded_blobs, recycle_activations)</td></tr>
<tr class="separator:afe15de0fc503825c9f2b55fc06884b2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a82b46df1189a4d6a157d4d6a16d4c9fe"><td class="memItemLeft" align="right" valign="top"><a id="a82b46df1189a4d6a157d4d6a16d4c9fe"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>log</b> = logging.getLogger(&quot;data_parallel_model&quot;)</td></tr>
<tr class="separator:a82b46df1189a4d6a157d4d6a16d4c9fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a985be4f42d4234cc2613c64ae5662001"><td class="memItemLeft" align="right" valign="top"><a id="a985be4f42d4234cc2613c64ae5662001"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>barrier_instance</b> = 0</td></tr>
<tr class="separator:a985be4f42d4234cc2613c64ae5662001"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Module caffe2.python.data_parallel_model. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aff1dd8e58b54d329a98e99e3837e8a99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff1dd8e58b54d329a98e99e3837e8a99">&#9670;&nbsp;</a></span>AddBlobSync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def data_parallel_model.AddBlobSync </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>blobs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>net</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Sync a blob across devices and hosts
</pre> 
<p class="definition">Definition at line <a class="el" href="data__parallel__model_8py_source.html#l01017">1017</a> of file <a class="el" href="data__parallel__model_8py_source.html">data_parallel_model.py</a>.</p>

</div>
</div>
<a id="ac063cc91a546683b52bbca76cd488e72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac063cc91a546683b52bbca76cd488e72">&#9670;&nbsp;</a></span>AddDistributedBlobSync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def data_parallel_model.AddDistributedBlobSync </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>blobs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Sync blobs across machines (but not across devices)
</pre> 
<p class="definition">Definition at line <a class="el" href="data__parallel__model_8py_source.html#l01041">1041</a> of file <a class="el" href="data__parallel__model_8py_source.html">data_parallel_model.py</a>.</p>

</div>
</div>
<a id="a0301331ccdf3c0d6f6fd2f38991b3c4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0301331ccdf3c0d6f6fd2f38991b3c4c">&#9670;&nbsp;</a></span>ConvertNetForDevice()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def data_parallel_model.ConvertNetForDevice </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>net</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>device</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Converts all blobs in the net to have namescope gpu_X, and correct
device scope. You can use this to enable AppendNet with a
forward_pass_builder_fun:

   def builder_fun(model):
      ...
      model.net.AppendNet(
         data_parallel_model.ConvertNetForDevice(othermodel.net))
      model.param_init_net.AppendNet(
         data_parallel_model.ConvertNetForDevice(othermodel.param_init_net))
</pre> 
<p class="definition">Definition at line <a class="el" href="data__parallel__model_8py_source.html#l00710">710</a> of file <a class="el" href="data__parallel__model_8py_source.html">data_parallel_model.py</a>.</p>

</div>
</div>
<a id="a4c4bd80dfa3243526cb86c75e817b0b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c4bd80dfa3243526cb86c75e817b0b0">&#9670;&nbsp;</a></span>ExtractPredictorNet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def data_parallel_model.ExtractPredictorNet </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>inputs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>outputs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>device</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Returns (net, params) that can be exported to be used as a prediction
net.
</pre> 
<p class="definition">Definition at line <a class="el" href="data__parallel__model_8py_source.html#l00776">776</a> of file <a class="el" href="data__parallel__model_8py_source.html">data_parallel_model.py</a>.</p>

</div>
</div>
<a id="aeaf6f1994dee2a119718c0fff65962ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeaf6f1994dee2a119718c0fff65962ba">&#9670;&nbsp;</a></span>FinalizeAfterCheckpoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def data_parallel_model.FinalizeAfterCheckpoint </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>blobs</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">This function should be called after loading parameters from a
checkpoint / initial parameters file.
</pre> 
<p class="definition">Definition at line <a class="el" href="data__parallel__model_8py_source.html#l00823">823</a> of file <a class="el" href="data__parallel__model_8py_source.html">data_parallel_model.py</a>.</p>

</div>
</div>
<a id="abce7bdef068c7961e610e30fbb2fc11e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abce7bdef068c7961e610e30fbb2fc11e">&#9670;&nbsp;</a></span>GetCheckpointParams()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def data_parallel_model.GetCheckpointParams </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>model</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Returns a set of blobs that are needed for a complete check point.
They are blobs for the first gpu and iteration blobs.
</pre> 
<p class="definition">Definition at line <a class="el" href="data__parallel__model_8py_source.html#l00799">799</a> of file <a class="el" href="data__parallel__model_8py_source.html">data_parallel_model.py</a>.</p>

</div>
</div>
<a id="a2a15f5a3c60ed2c6805cf1a567d2cf1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a15f5a3c60ed2c6805cf1a567d2cf1f">&#9670;&nbsp;</a></span>GetLearningRateBlobNames()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def data_parallel_model.GetLearningRateBlobNames </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>model</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Returns a list of learning rates blob names used in the optimizer.
</pre> 
<p class="definition">Definition at line <a class="el" href="data__parallel__model_8py_source.html#l00878">878</a> of file <a class="el" href="data__parallel__model_8py_source.html">data_parallel_model.py</a>.</p>

</div>
</div>
<a id="afe15de0fc503825c9f2b55fc06884b2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe15de0fc503825c9f2b55fc06884b2c">&#9670;&nbsp;</a></span>OptimizeGradientMemory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def data_parallel_model.OptimizeGradientMemory </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>input_shapes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>excluded_blobs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>recycle_activations</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Optimize memory usage of the backward pass by recycling blobs for gradient
inputs that have been 'used'.
input_shapes:  dict of blob name to shape for the inputs of the model.
               Pass empty dictionary if not known.
excluded_blobs: list of blobs that cannot be recycled. These are blobs
               that you will access externally.
recycle_activations: whether to also recycle forward pass activations
</pre> 
<p class="definition">Definition at line <a class="el" href="data__parallel__model_8py_source.html#l01667">1667</a> of file <a class="el" href="data__parallel__model_8py_source.html">data_parallel_model.py</a>.</p>

</div>
</div>
<a id="a8528db8b99860b41e6870bc2c73adb65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8528db8b99860b41e6870bc2c73adb65">&#9670;&nbsp;</a></span>Parallelize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def data_parallel_model.Parallelize </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>model_helper_obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>input_builder_fun</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>forward_pass_builder_fun</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>param_update_builder_fun</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>optimizer_builder_fun</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>post_sync_builder_fun</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>devices</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>rendezvous</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>net_type</em> = <code>'dag'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>broadcast_computed_params</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>optimize_gradient_memory</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dynamic_memory_management</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>blobs_to_keep</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>use_nccl</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>max_concurrent_distributed_ops</em> = <code>16</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cpu_device</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>num_threads_per_device</em> = <code>4</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>shared_model</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Function to create a model that can run on many GPUs or CPUs.
  model_helper_obj: an object of ModelHelper
  input_builder_fun:
                     Function that adds the input operators
                     Note: Remember to instantiate reader outside of this
                     function so all devices share same reader object.
                     Signature:  input_builder_fun(model)
  forward_pass_builder_fun:
                    Function to add the operators to the model.
                    Must return list of loss-blob references that
                    are used to build the gradient. Loss scale parameter
                    is passed, as you should scale the loss of your model
                    by 1.0 / the total number of devices.
                    Signature: forward_pass_builder_fun(model, loss_scale)
  param_update_builder_fun:
                    Function that adds operators that are run after
                    gradient update, such as updating the weights and
                    weight decaying. This is called for each GPU separately.
                    Signature: param_update_builder_fun(model)
  optimizer_builder_fun:
                    Alternative to param_update_builder_fun, allows one
                    to add an optimizer for the whole model. Called only
                    once, without name or devicescope.
  post_sync_builder_fun:
                    Function applied after initial parameter sync has been
                    completed, such as keeping multi-precision parameters
                    in sync.
                    Signature: post_sync_builder_fun(model)
  devices:          List of GPU ids, such as [0, 1, 2, 3],
  rendezvous:       used for rendezvous in distributed computation, if None
                    then only one node is used. To create rendezvous,
                    use &lt;TBD&gt;.
  net_type:         Network type
  optimize_gradient_memory: whether to apply 'memonger' to share blobs
  shared_model      (only for CPU) use same parameters on each device
                    in gradient computation to reduce memory footprint.
  dynamic_memory_management: Whether to apply dynamic memory optimization
                    by freeing unused blobs. The underlying (de)allocation
                    uses cached allocator. For GPU training PLEASE MAKE SURE
                    caffe2_cuda_memory_pool is set.
  blobs_to_keep :   A list of blob names to keep and don't free during
                    dynamic memory optimization (for example loss blob).
  cpu_device        Use CPU instead of GPU.
</pre> 
<p class="definition">Definition at line <a class="el" href="data__parallel__model_8py_source.html#l00071">71</a> of file <a class="el" href="data__parallel__model_8py_source.html">data_parallel_model.py</a>.</p>

</div>
</div>
<a id="a75712d2f72a7a833151191750a4f6587"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75712d2f72a7a833151191750a4f6587">&#9670;&nbsp;</a></span>Parallelize_BMUF()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def data_parallel_model.Parallelize_BMUF </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>model_helper_obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>input_builder_fun</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>forward_pass_builder_fun</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>param_update_builder_fun</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>block_learning_rate</em> = <code>1.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>block_momentum</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>devices</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>rendezvous</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>net_type</em> = <code>'dag'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>master_device</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>use_nccl</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>nesterov</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>optimize_gradient_memory</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>reset_momentum_sgd</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>warmup_iterations</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>max_concurrent_distributed_ops</em> = <code>4</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>add_blobs_to_sync</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>num_threads_per_device</em> = <code>4</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cpu_device</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Function to create model that run on many GPUs and creates a net for
parameter_updates that can be run independently for number of iterations
then followed by another net that runs once to compute the final parameter
updates according to block wise model update filtering rule described
in : Scalable Training of Deep Learning Machines by Incremental Block
Training with Intra-block Parallel Optimization and Blockwise Model-Update
Filtering (ICASSP 2016).
</pre> 
<p class="definition">Definition at line <a class="el" href="data__parallel__model_8py_source.html#l00386">386</a> of file <a class="el" href="data__parallel__model_8py_source.html">data_parallel_model.py</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.14-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jan 16 2018 13:16:29 for Caffe2 - Python API by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
<div class="footerContainer">
  <div id="footer_wrap" class="wrapper footerWrapper">
    <div class="footerBlocks">
      <div id="fb_oss" class="footerSection fbOpenSourceFooter">
          <svg class="facebookOSSLogoSvg" viewBox="0 0 1133.9 1133.9" x="0px" y="0px" height=50 width=50>
            <g>
              <path class="logoRing outerRing" d="M 498.3 3.7 c 153.6 88.9 307.3 177.7 461.1 266.2 c 7.6 4.4 10.3 9.1 10.3 17.8 c -0.3 179.1 -0.2 358.3 0 537.4 c 0 8.1 -2.4 12.8 -9.7 17.1 c -154.5 88.9 -308.8 178.1 -462.9 267.5 c -9 5.2 -15.5 5.3 -24.6 0.1 c -153.9 -89.2 -307.9 -178 -462.1 -266.8 C 3 838.8 0 833.9 0 825.1 c 0.3 -179.1 0.2 -358.3 0 -537.4 c 0 -8.6 2.6 -13.6 10.2 -18 C 164.4 180.9 318.4 92 472.4 3 C 477 -1.5 494.3 -0.7 498.3 3.7 Z M 48.8 555.3 c 0 79.9 0.2 159.9 -0.2 239.8 c -0.1 10 3 15.6 11.7 20.6 c 137.2 78.8 274.2 157.8 411 237.3 c 9.9 5.7 17 5.7 26.8 0.1 c 137.5 -79.8 275.2 -159.2 412.9 -238.5 c 7.4 -4.3 10.5 -8.9 10.5 -17.8 c -0.3 -160.2 -0.3 -320.5 0 -480.7 c 0 -8.8 -2.8 -13.6 -10.3 -18 C 772.1 218 633.1 137.8 494.2 57.4 c -6.5 -3.8 -11.5 -4.5 -18.5 -0.5 C 336.8 137.4 197.9 217.7 58.8 297.7 c -7.7 4.4 -10.2 9.2 -10.2 17.9 C 48.9 395.5 48.8 475.4 48.8 555.3 Z" />
              <path class="logoRing middleRing" d="M 184.4 555.9 c 0 -33.3 -1 -66.7 0.3 -100 c 1.9 -48 24.1 -86 64.7 -110.9 c 54.8 -33.6 110.7 -65.5 167 -96.6 c 45.7 -25.2 92.9 -24.7 138.6 1 c 54.4 30.6 108.7 61.5 162.2 93.7 c 44 26.5 67.3 66.8 68 118.4 c 0.9 63.2 0.9 126.5 0 189.7 c -0.7 50.6 -23.4 90.7 -66.6 116.9 c -55 33.4 -110.8 65.4 -167.1 96.5 c -43.4 24 -89 24.2 -132.3 0.5 c -57.5 -31.3 -114.2 -64 -170 -98.3 c -41 -25.1 -62.9 -63.7 -64.5 -112.2 C 183.5 621.9 184.3 588.9 184.4 555.9 Z M 232.9 556.3 c 0 29.5 0.5 59.1 -0.1 88.6 c -0.8 39.2 16.9 67.1 50.2 86.2 c 51.2 29.4 102.2 59.2 153.4 88.4 c 31.4 17.9 63.6 18.3 95 0.6 c 53.7 -30.3 107.1 -61.2 160.3 -92.5 c 29.7 -17.5 45 -44.5 45.3 -78.8 c 0.6 -61.7 0.5 -123.5 0 -185.2 c -0.3 -34.4 -15.3 -61.5 -44.9 -79 C 637.7 352.6 583 320.8 527.9 290 c -27.5 -15.4 -57.2 -16.1 -84.7 -0.7 c -56.9 31.6 -113.4 64 -169.1 97.6 c -26.4 15.9 -40.7 41.3 -41.1 72.9 C 232.6 491.9 232.9 524.1 232.9 556.3 Z" />
              <path class="logoRing innerRing" d="M 484.9 424.4 c 69.8 -2.8 133.2 57.8 132.6 132 C 617 630 558.5 688.7 484.9 689.1 c -75.1 0.4 -132.6 -63.6 -132.7 -132.7 C 352.1 485 413.4 421.5 484.9 424.4 Z M 401.3 556.7 c -3.4 37.2 30.5 83.6 83 84.1 c 46.6 0.4 84.8 -37.6 84.9 -84 c 0.1 -46.6 -37.2 -84.4 -84.2 -84.6 C 432.2 472.1 397.9 518.3 401.3 556.7 Z" />
            </g>
          </svg>
        <h2>Facebook Open Source</h2>
      </div>
      <div class="footerSection">
        <a class="footerLink" href="https://code.facebook.com/projects/" target="_blank">Open Source Projects</a>
        <a class="footerLink" href="https://github.com/facebook/" target="_blank">GitHub</a>
        <a class="footerLink" href="https://twitter.com/fbOpenSource" target="_blank">Twitter</a>
      </div>
      <div class="footerSection rightAlign">
        <a class="footerLink" href="https://github.com/caffe2/caffe2" target="_blank">Contribute to this project on GitHub</a>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript" src="/js/jekyll-link-anchors.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', '{{ site.gacode }}', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
